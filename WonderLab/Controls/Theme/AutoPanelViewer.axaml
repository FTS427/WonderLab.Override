<ResourceDictionary xmlns="https://github.com/avaloniaui"
					xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
					xmlns:wc="using:WonderLab.Controls">
	<Design.PreviewWith>
		<Border Width="200" Height="200" IsHitTestVisible="False">
			<wc:AutoPanelViewer>
				
			</wc:AutoPanelViewer>
		</Border>
	</Design.PreviewWith>

	<ControlTheme x:Key="{x:Type wc:AutoPanelViewer}" TargetType="wc:AutoPanelViewer">
		<Setter Property="MaxWidth" Value="440"/>
		<Setter Property="MinWidth" Value="450"/>
		<Setter Property="MinHeight" Value="180"/>
		<Setter Property="CornerRadius" Value="8"/>
		<Setter Property="BorderThickness" Value="2"/>
		<Setter Property="ClipToBounds" Value="False"/>
		<Setter Property="BorderBrush" Value="{DynamicResource NormalAccentBrush}"/>
		<Setter Property="Background" Value="{DynamicResource TitleBarBackground}"/>
		<Setter Property="VerticalAlignment" Value="Stretch"/>
		<Setter Property="HorizontalAlignment" Value="Right"/>
		
		<Setter Property="Template">
			<ControlTemplate>
				<Panel Background="{x:Null}"
					   MinWidth="{TemplateBinding MinWidth}"
					   MaxWidth="{TemplateBinding MaxWidth}"
					   ClipToBounds="{TemplateBinding ClipToBounds}"
					   VerticalAlignment="{TemplateBinding VerticalAlignment}"
					   HorizontalAlignment="{TemplateBinding HorizontalAlignment}">
					<Border Opacity="0"
							Width="10"
							Height="150"
							Name="PART_LayoutBorder"
							VerticalAlignment="Center"
							HorizontalAlignment="Right"
							BoxShadow="0 1 2 1 #36000000"
							Background="{TemplateBinding Background}"
							BorderBrush="{TemplateBinding BorderBrush}"
							CornerRadius="{TemplateBinding CornerRadius}"
							ClipToBounds="{TemplateBinding ClipToBounds}"
							BorderThickness="{TemplateBinding BorderThickness}">
						<Border.Transitions>
							<Transitions>
								<ThicknessTransition Duration="0:0:.35"
													 Property="Margin"
													 Easing="ExponentialEaseOut"/>
							</Transitions>
						</Border.Transitions>
						
						<ContentPresenter Opacity="0"
										  Name="PART_ContentPresenter"
										  Content="{TemplateBinding Content}"/>
					</Border>
				</Panel>
			</ControlTemplate>
		</Setter>
		
		<Style Selector="^ /template/ Border#PART_LayoutBorder">
			<Style.Animations>
				<Animation Delay="0:0:.35"
						   Duration="0:0:.45"
						   FillMode="Forward">
					<KeyFrame Cue="0%" KeySpline="0.55, 0, 1, 0.45">
						<Setter Property="Opacity" Value="1"/>
						<Setter Property="TranslateTransform.X" Value="25"/>
						<Setter Property="ScaleTransform.ScaleY" Value="0.8"/>
					</KeyFrame>

					<KeyFrame Cue="10%" KeySpline="0.55, 0, 1, 0.45">
						<Setter Property="ScaleTransform.ScaleY" Value="0.75"/>
					</KeyFrame>

					<KeyFrame Cue="60%" KeySpline="0.34, 1.56, 0.64, 1">
						<Setter Property="TranslateTransform.X" Value="-12"/>
					</KeyFrame>

					<KeyFrame Cue="100%" KeySpline="0.34, 1.56, 0.64, 1">
						<Setter Property="TranslateTransform.X" Value="-16"/>
						<Setter Property="ScaleTransform.ScaleY" Value="1"/>
					</KeyFrame>
				</Animation>
			</Style.Animations> 
		</Style>

		<Style Selector="^:panelhide /template/ Border#PART_LayoutBorder">
			<Style.Animations>
				<Animation Duration="0:0:.45"
						   FillMode="Forward">
					<KeyFrame Cue="0%" KeySpline="0.34, 1.56, 0.64, 1">
						<Setter Property="TranslateTransform.X" Value="-16"/>
						<Setter Property="ScaleTransform.ScaleY" Value="1"/>
					</KeyFrame>

					<KeyFrame Cue="40%" KeySpline="0.34, 1.56, 0.64, 1">
						<Setter Property="TranslateTransform.X" Value="-20"/>
					</KeyFrame>

					<KeyFrame Cue="90%" KeySpline="0.55, 0, 1, 0.45">
						<Setter Property="ScaleTransform.ScaleY" Value="0.8"/>
					</KeyFrame>

					<KeyFrame Cue="100%" KeySpline="0.55, 0, 1, 0.45"> 
						<Setter Property="TranslateTransform.X" Value="25"/>
						<Setter Property="ScaleTransform.ScaleY" Value="0.75"/>
					</KeyFrame>
				</Animation>
			</Style.Animations>
		</Style>

		<Style Selector="^:panelshow /template/ Border#PART_LayoutBorder">
			<Style.Animations>
				<Animation Duration="0:0:.75"
						   FillMode="Forward">
					<KeyFrame Cue="0%" KeySpline="0.55, 0, 1, 0.45">
						<Setter Property="TranslateTransform.X" Value="25"/>
						<Setter Property="ScaleTransform.ScaleY" Value="0.8"/>
					</KeyFrame>

					<KeyFrame Cue="10%" KeySpline="0.55, 0, 1, 0.45">
						<Setter Property="ScaleTransform.ScaleY" Value="0.75"/>
					</KeyFrame>

					<KeyFrame Cue="60%" KeySpline="0.34, 1.56, 0.64, 1">
						<Setter Property="TranslateTransform.X" Value="-12"/>
					</KeyFrame>

					<KeyFrame Cue="100%" KeySpline="0.34, 1.56, 0.64, 1">
						<Setter Property="TranslateTransform.X" Value="-16"/>
						<Setter Property="ScaleTransform.ScaleY" Value="1"/>
					</KeyFrame>
				</Animation>
			</Style.Animations>
		</Style>

		<Style Selector="^:panelopen /template/ Border#PART_LayoutBorder">
			<Style.Animations>
				<Animation Duration="0:0:.75"
						   FillMode="Forward">
					<KeyFrame Cue="0%" KeySpline="0, 0.55, 0.45, 1">
						<Setter Property="Width" Value="10"/>
						<Setter Property="Height" Value="150"/>
						<Setter Property="CornerRadius" Value="8"/>
					</KeyFrame>

					<KeyFrame Cue="60%" KeySpline="0.34, 1.26, 0.64, 1">
						<Setter Property="Width" Value="445"/>
						<Setter Property="Height" Value="{Binding $parent[Panel].Bounds.Height, Converter={StaticResource BackEaseValueConverter}, ConverterParameter=5}"/>
					</KeyFrame>

					<KeyFrame Cue="100%" KeySpline="0.34, 1.36, 0.64, 1">
						<Setter Property="Width" Value="440"/>
						<Setter Property="CornerRadius" Value="12"/>
						<Setter Property="Height" Value="{Binding $parent[Panel].Bounds.Height}"/>
					</KeyFrame>
				</Animation>
			</Style.Animations>
		</Style>

		<Style Selector="^:panelclose /template/ Border#PART_LayoutBorder">
			<Style.Animations>
				<Animation Duration="0:0:.85"
						   FillMode="Forward">
					<KeyFrame Cue="0%" KeySpline="0.34, 1.56, 0.64, 1">
						<Setter Property="Width" Value="440"/>
						<Setter Property="CornerRadius" Value="12"/>
						<Setter Property="Height" Value="{Binding $parent[Panel].Bounds.Height}"/>
					</KeyFrame>

					<KeyFrame Cue="30%" KeySpline="0.34, 1.26, 0.64, 1">
						<Setter Property="Width" Value="450"/>
						<Setter Property="Height" Value="{Binding $parent[Panel].Bounds.Height, Converter={StaticResource BackEaseValueConverter}, ConverterParameter=10}"/>
					</KeyFrame>

					<KeyFrame Cue="60%" KeySpline="0.55, 0, 1, 0.45">
						<Setter Property="Width" Value="10"/>
						<Setter Property="Height" Value="150"/>
						<Setter Property="CornerRadius" Value="8"/>
						<Setter Property="TranslateTransform.X" Value="0"/>
					</KeyFrame>

					<KeyFrame Cue="100%" KeySpline="0.34, 1.26, 0.64, 1">
						<Setter Property="Width" Value="10"/>
						<Setter Property="Height" Value="150"/>
						<Setter Property="CornerRadius" Value="8"/>
						<Setter Property="TranslateTransform.X" Value="-16"/>
					</KeyFrame>
				</Animation>
			</Style.Animations>
		</Style>

		<Style Selector="^:panelopen /template/ ContentPresenter#PART_ContentPresenter">
			<Style.Animations>
				<Animation Delay="0:0:0.1"
						   Duration="0:0:.35"
						   FillMode="Forward"
						   Easing="ExponentialEaseOut">
					<KeyFrame Cue="0%">
						<Setter Property="Opacity" Value="0"/>
					</KeyFrame>

					<KeyFrame Cue="100%">
						<Setter Property="Opacity" Value="1"/>
					</KeyFrame>
				</Animation>
			</Style.Animations>
		</Style>

		<Style Selector="^:panelclose /template/ ContentPresenter#PART_ContentPresenter">
			<Style.Animations>
				<Animation Delay="0:0:0.2"
						   Duration="0:0:.55"
						   FillMode="Forward"
						   Easing="ExponentialEaseInOut">
					<KeyFrame Cue="0%">
						<Setter Property="Opacity" Value="1"/>
					</KeyFrame>

					<KeyFrame Cue="100%">
						<Setter Property="Opacity" Value="0"/>
					</KeyFrame>
				</Animation>
			</Style.Animations>
		</Style>
	</ControlTheme>
</ResourceDictionary>